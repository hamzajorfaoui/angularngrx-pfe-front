

<app-portlet title="Gestion des Actualité">


    <div class="tableau" >
        <h6 style="color:#348f6cec;">Ajouter Une Actualité :</h6>
        <form  (submit)="onFormSubmit($event)">
            <dx-form id="form"
                [formData]="dataSource">
                
                <dxi-item dataField="title">
                    <dxi-validation-rule 
                            type="required">
                    </dxi-validation-rule> 
                </dxi-item>
                <dxi-item dataField="contenu" editorType="dxTextArea" 
                [editorOptions]="{height:'90'}" >
                    <dxi-validation-rule 
                            type="required">
                    </dxi-validation-rule> 
                </dxi-item>

                <dxi-item name="show-order" dataField="filieres">
                    <dxo-label text="Choisissez les filieres :" ></dxo-label>
                    <div *dxTemplate  >
                     <div *ngFor="let dept of dataSource"  style="display: inline-block;">
                        <h6>{{dept.text}} :</h6>

                        <dx-list
                        *ngIf="dept.selectedItems"
                        [items]="dept.filiere"
                        [height]="180"
                        [width]="200"
                        [itemDeleteMode]="deleteType"
                        [showSelectionControls]="true"
                        selectionMode="multiple"
                        [(selectedItems)]="dept.selectedItems">

                        <dxi-validation-rule 
                            type="required">
                    </dxi-validation-rule> 
                    </dx-list>
                     </div>   
                   </div>
                </dxi-item>
                   <dxi-item 
                   *ngIf="!loading"
                    id="buttonsubmit"
                    caption="Update"
                    itemType="button"
                    horizontalAlignment="right"
                    [buttonOptions]="buttonOptions">
                    </dxi-item> 
                    
            </dx-form>
            <div *ngIf="loading" style="width: 100%;height:30px;">
              <div class="spinner-border text-success" role="status" style="float: right;">
                <span class="sr-only">Loading...</span>
            </div>  
            </div>
            
            </form>

            <div>
                <div id="data-grid-demo">
                <h6 style="color:#348f6cec;">Liste des Actualités</h6>
                <dx-data-grid 
                #targetDataGrid
                id="gridContainer" 
                [dataSource]="Actualites"
                keyExpr="id"
                [showBorders]="true">
            
                <dxo-selection mode="single"></dxo-selection>
                <dxo-filter-row [visible]="true"></dxo-filter-row>
                <dxi-column dataField="id" [width]="70" caption="Id"></dxi-column>
                <dxi-column dataField="filiresname" caption="Filieres" [width]="120"></dxi-column>
                <dxi-column dataField="title" caption="Titre" [width]="100"></dxi-column>
                <dxi-column dataField="contenu"   ></dxi-column>
                <dxi-column dataField="created_at" [width]="130"></dxi-column>
                <dxi-column dataField="updated_at" [width]="130" ></dxi-column>
                <!-- <dxi-column dataField="created_at" [width]="130"></dxi-column>
                <dxi-column dataField="updated_at" [width]="130"></dxi-column> -->
                <!-- <dxi-column dataField="id" [width]="100" [allowFiltering]="false"
                [allowSorting]="false" cellTemplate="cellTemplate" caption="Profile"></dxi-column>
                <div *dxTemplate="let data of 'cellTemplate'" class="profile">
                    <a [routerLink]="['/dashboard/etudiant/profile',data.value]" ><i class="grrr far fa-id-card">{{data.id}}</i></a>
                </div> -->
                <dxo-editing 
                            mode="popup"
                            [refreshMode]="full"
                            [allowDeleting]="true"
                            [allowUpdating]="true">
                            <dxo-popup
                            title="Information d'actualité"
                            [showTitle]="true"
                            [width]="400"
                            [height]="360"
                            [position]="{ my: 'center', at: 'center', of: window }">
                        </dxo-popup>
                        <dxo-form> 
                            <dxi-item dataField="title"  [colSpan]="2">
                                <dxi-validation-rule type="required"></dxi-validation-rule>
                            </dxi-item>
                            <dxi-item dataField="contenu"  editorType="dxTextArea" 
                            [editorOptions]="{height:'90'}" [colSpan]="2" >
                                <dxi-validation-rule type="required"></dxi-validation-rule>
                               </dxi-item>      
                        </dxo-form>
                        
                        
                        </dxo-editing>
                        <!-- <div *dxTemplate="let data of dataSource">
                            <span class="dx-icon-home icon"></span> {{data.cne}} 
                          </div> -->
            </dx-data-grid>
            </div>
        </div>


    </div>



</app-portlet>